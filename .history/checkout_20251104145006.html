<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checkout - FoodFrenzy</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Header -->
  <header class="header" id="header">
    <nav class="navbar">
      <div class="container">
        <div class="nav-wrapper">
          <a href="index.html" class="logo">
            <i class="fas fa-utensils"></i>
            <span>Food<span class="logo-accent">Frenzy</span></span>
          </a>
          <ul class="nav-menu" id="navMenu">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="index.html#menu" class="nav-link">Menu</a></li>
            <li><a href="cart.html" class="nav-link">
              <i class="fas fa-arrow-left"></i> Back to Cart
            </a></li>
          </ul>
          <div class="nav-icons">
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
              <i class="fas fa-moon"></i>
            </button>
            <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle menu">
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="checkout-page-main">
    <div class="container">
      <!-- Page Header -->
      <div class="page-header">
        <div class="breadcrumb">
          <a href="index.html"><i class="fas fa-home"></i> Home</a>
          <span><i class="fas fa-chevron-right"></i></span>
          <a href="cart.html">Cart</a>
          <span><i class="fas fa-chevron-right"></i></span>
          <span class="current">Checkout</span>
        </div>
        <h1 class="page-title">
          <i class="fas fa-credit-card"></i>
          Secure Checkout
        </h1>
        <p class="page-subtitle">Complete your order safely and securely</p>
      </div>

      <!-- Checkout Progress -->
      <div class="checkout-progress">
        <div class="progress-step active completed">
          <div class="step-icon"><i class="fas fa-shopping-cart"></i></div>
          <div class="step-label">Cart</div>
        </div>
        <div class="progress-line active"></div>
        <div class="progress-step active">
          <div class="step-icon"><i class="fas fa-credit-card"></i></div>
          <div class="step-label">Payment</div>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step">
          <div class="step-icon"><i class="fas fa-check-circle"></i></div>
          <div class="step-label">Complete</div>
        </div>
      </div>

      <!-- Checkout Grid -->
      <div class="checkout-page-grid">
        <!-- Checkout Form Section -->
        <div class="checkout-form-section">
          <!-- Customer Information -->
          <div class="checkout-card">
            <h3 class="checkout-card-title">
              <i class="fas fa-user"></i>
              Customer Information
            </h3>
            <form id="checkoutForm" class="checkout-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="firstName">First Name *</label>
                  <input type="text" id="firstName" name="firstName" required>
                  <span class="error-message" id="errorFirstName"></span>
                </div>
                <div class="form-group">
                  <label for="lastName">Last Name *</label>
                  <input type="text" id="lastName" name="lastName" required>
                  <span class="error-message" id="errorLastName"></span>
                </div>
              </div>

              <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" required>
                <span class="error-message" id="errorEmail"></span>
              </div>

              <div class="form-group">
                <label for="phone">Phone Number *</label>
                <input type="tel" id="phone" name="phone" required>
                <span class="error-message" id="errorPhone"></span>
              </div>
            </form>
          </div>

          <!-- Delivery Address -->
          <div class="checkout-card">
            <h3 class="checkout-card-title">
              <i class="fas fa-map-marker-alt"></i>
              Delivery Address
            </h3>
            <form class="checkout-form">
              <div class="form-group">
                <label for="address">Street Address *</label>
                <input type="text" id="address" name="address" required>
                <span class="error-message" id="errorAddress"></span>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="city">City *</label>
                  <input type="text" id="city" name="city" required>
                  <span class="error-message" id="errorCity"></span>
                </div>
                <div class="form-group">
                  <label for="zipCode">ZIP Code *</label>
                  <input type="text" id="zipCode" name="zipCode" required>
                  <span class="error-message" id="errorZipCode"></span>
                </div>
              </div>

              <div class="form-group">
                <label for="deliveryNotes">Delivery Instructions (Optional)</label>
                <textarea id="deliveryNotes" name="deliveryNotes" rows="3" placeholder="E.g., Ring doorbell, leave at door, etc."></textarea>
              </div>
            </form>
          </div>

          <!-- Payment Method -->
          <div class="checkout-card">
            <h3 class="checkout-card-title">
              <i class="fas fa-credit-card"></i>
              Payment Method
            </h3>
            <div class="payment-methods">
              <div class="payment-option active">
                <input type="radio" id="creditCard" name="paymentMethod" value="credit-card" checked>
                <label for="creditCard">
                  <i class="fas fa-credit-card"></i>
                  Credit/Debit Card
                </label>
              </div>
              <div class="payment-option">
                <input type="radio" id="paypal" name="paymentMethod" value="paypal">
                <label for="paypal">
                  <i class="fab fa-paypal"></i>
                  PayPal
                </label>
              </div>
              <div class="payment-option">
                <input type="radio" id="cashOnDelivery" name="paymentMethod" value="cash">
                <label for="cashOnDelivery">
                  <i class="fas fa-money-bill-wave"></i>
                  Cash on Delivery
                </label>
              </div>
            </div>

            <div id="cardDetails" class="card-details-form">
              <div class="form-group">
                <label for="cardNumber">Card Number *</label>
                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="expiryDate">Expiry Date *</label>
                  <input type="text" id="expiryDate" placeholder="MM/YY" maxlength="5">
                </div>
                <div class="form-group">
                  <label for="cvv">CVV *</label>
                  <input type="text" id="cvv" placeholder="123" maxlength="3">
                </div>
              </div>

              <div class="secure-payment-notice">
                <i class="fas fa-lock"></i>
                Your payment information is encrypted and secure
              </div>
            </div>
          </div>
        </div>

        <!-- Order Summary Sidebar -->
        <aside class="checkout-summary-sidebar">
          <div class="summary-card">
            <h3 class="summary-title">
              <i class="fas fa-receipt"></i>
              Order Summary
            </h3>
            
            <div id="checkoutItems" class="checkout-items-list">
              <!-- Items will be loaded here -->
            </div>

            <div class="summary-divider"></div>

            <div class="summary-details">
              <div class="summary-row">
                <span class="summary-label">Subtotal</span>
                <span class="summary-value" id="checkoutSubtotal">$0.00</span>
              </div>
              <div class="summary-row">
                <span class="summary-label">Tax (8%)</span>
                <span class="summary-value" id="checkoutTax">$0.00</span>
              </div>
              <div class="summary-row">
                <span class="summary-label">Delivery Fee</span>
                <span class="summary-value summary-free">FREE</span>
              </div>
              
              <div class="summary-divider"></div>
              
              <div class="summary-row summary-total">
                <span class="summary-label">Total</span>
                <span class="summary-value" id="checkoutTotal">$0.00</span>
              </div>
            </div>

            <button id="placeOrderBtn" class="btn btn-primary btn-block btn-checkout">
              <i class="fas fa-check-circle"></i>
              Place Order
            </button>

            <div class="secure-checkout">
              <i class="fas fa-shield-alt"></i>
              SSL Encrypted Checkout
            </div>
          </div>

          <!-- Money Back Guarantee -->
          <div class="guarantee-card">
            <div class="guarantee-icon">
              <i class="fas fa-undo-alt"></i>
            </div>
            <div class="guarantee-content">
              <h4>Money Back Guarantee</h4>
              <p>Not satisfied? Get a full refund within 30 days</p>
            </div>
          </div>

          <div class="guarantee-card">
            <div class="guarantee-icon">
              <i class="fas fa-shipping-fast"></i>
            </div>
            <div class="guarantee-content">
              <h4>Fast Delivery</h4>
              <p>Delivered hot and fresh in 30-45 minutes</p>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <!-- Success Modal -->
  <div class="modal" id="successModal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="modal-icon success">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2>Order Placed Successfully!</h2>
      <p>Thank you for your order!</p>
      <div class="order-details">
        <p><strong>Order Number:</strong> <span id="orderNumber"></span></p>
        <p><strong>Estimated Delivery:</strong> <span id="deliveryTime">30-45 minutes</span></p>
        <p><strong>Total Amount:</strong> <span id="totalAmount">$0.00</span></p>
      </div>
      <button class="btn btn-primary" onclick="window.location.href='index.html'">
        <i class="fas fa-home"></i>
        Back to Home
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-simple">
        <p>&copy; 2025 FoodFrenzy. All rights reserved.</p>
        <div class="footer-links">
          <a href="index.html#about">About</a>
          <a href="index.html#contact">Contact</a>
          <a href="#">Privacy Policy</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Checkout Page Script
    const STORAGE_KEY = 'foodfrenzy_cart';
    const TAX_RATE = 0.08;

    function loadCart() {
      const raw = localStorage.getItem(STORAGE_KEY);
      return raw ? JSON.parse(raw) : [];
    }

    function formatCurrency(n) {
      return '$' + n.toFixed(2);
    }

    function renderImageHTML(image, alt = '') {
      if (typeof image === 'string' && (
        image.startsWith('assets/') || 
        image.startsWith('./assets/') || 
        image.startsWith('/assets/') ||
        image.startsWith('http://') ||
        image.startsWith('https://')
      )) {
        return `<img src="${image}" alt="${alt}" />`;
      }
      return `<span class="emoji-fallback">${image || 'üçΩ'}</span>`;
    }

    function loadCheckoutItems() {
      const cart = loadCart();
      const container = document.getElementById('checkoutItems');

      if (cart.length === 0) {
        window.location.href = 'cart.html';
        return;
      }

      const html = cart.map(item => `
        <div class="checkout-item">
          <div class="checkout-item-image">
            ${renderImageHTML(item.image, item.name)}
          </div>
          <div class="checkout-item-details">
            <div class="checkout-item-name">${item.name}</div>
            <div class="checkout-item-qty">Qty: ${item.quantity}</div>
          </div>
          <div class="checkout-item-price">
            ${formatCurrency(item.price * item.quantity)}
          </div>
        </div>
      `).join('');

      container.innerHTML = html;
      updateTotals();
    }

    function updateTotals() {
      const cart = loadCart();
      const subtotal = cart.reduce((s, i) => s + i.price * i.quantity, 0);
      const tax = subtotal * TAX_RATE;
      const total = subtotal + tax;

      document.getElementById('checkoutSubtotal').textContent = formatCurrency(subtotal);
      document.getElementById('checkoutTax').textContent = formatCurrency(tax);
      document.getElementById('checkoutTotal').textContent = formatCurrency(total);
    }

    // Payment method switching
    document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('active'));
        e.target.closest('.payment-option').classList.add('active');
        
        const cardDetails = document.getElementById('cardDetails');
        if (e.target.value === 'credit-card') {
          cardDetails.style.display = 'block';
        } else {
          cardDetails.style.display = 'none';
        }
      });
    });

    // Place Order
    document.getElementById('placeOrderBtn').addEventListener('click', () => {
      // Simple validation
      const firstName = document.getElementById('firstName').value;
      const email = document.getElementById('email').value;
      const address = document.getElementById('address').value;

      if (!firstName || !email || !address) {
        alert('Please fill in all required fields');
        return;
      }

      // Generate order number
      const orderNum = 'FF' + Date.now().toString().slice(-8);
      document.getElementById('orderNumber').textContent = orderNum;
      
      const cart = loadCart();
      const subtotal = cart.reduce((s, i) => s + i.price * i.quantity, 0);
      const tax = subtotal * TAX_RATE;
      const total = subtotal + tax;
      document.getElementById('totalAmount').textContent = formatCurrency(total);

      // Show success modal
      document.getElementById('successModal').classList.add('active');

      // Clear cart
      localStorage.removeItem(STORAGE_KEY);
    });

    // Initialize
    loadCheckoutItems();
  </script>
</body>
</html>
